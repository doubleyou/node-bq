План МК
=======


Введение
--------

(20-30 минут)

Рассказать, почему треды плохие, почему коллбеки плохие, как же жить.
Грустный пример архитектуры рельс


Процессы
--------

(20 минут)

# spawn
# передача и прием сообщений
# link, monitor
# process dictionary


Веб-сервер
----------

(1:30)

Пишем быстро веб-сервер.

# Как запустить эрланг
# Стартуем процесс
# Как пользоваться make:all([load])
# Слушаем сокеты gen_tcp
# Процессы-воркеры для клиентских соединений. active,once, gen_tcp:controlling_process
# Как писать код, что бы он релоадился? Что будет, если использовать локальные вызовы
# Как пользоваться {packet,http}
# Чем плох inet:setopts({packet,http}): много сообщений
# binary vs list vs atom
# Альтернатива — erlang:decode_packet
# Как пользоваться spawn_opt
# Процессы падают тихо — запускаем через proc_lib:spawn()
# Описать проблемы кода, которые будут решаться с помощью OTP

Браузерная игрушка
------------------

# Ознакомление с кодом на ноде (15 мин)
# Рассказываем про ковбой (20 мин)
# Показываем как создавать приложение (rebar, reloader, lager) (30 мин)
# Запускаем ковбой со статическим хендлером (30 мин)
# Делаем прокси, изучаем поток команд (1 час)
# Изучаем протокол (15 мин)
# Структура данных, парсим карту и properties (30 мин)
# Обсуждаем архитектуру: подо что делать процессы, подо что не делать (40 мин)
# Узкие места, как их развязывать, как в будущем шардить (20 мин)
# Интроспекция (30 мин)
# Профилирование (40 мин)


* Один процесс — вебсокет, распаковывающий/упаковывающий данные, он же регистрируется в мире
* Мобы, объекты — просто записи в ets. При смерти выпиливаются, перекладываются в соседний ets
* Драки рассчитываются в клиентском процессе с синхронным обновлением через мир

# Шардинг
# Мониторинг скорости работы
# Админка сервера































